#!/usr/bin/env node
if (process.env.NODE_ENV === 'local') {
  //由于运行时不会设置BABEL_ENV = node，单独为node运行时设置插件处理
  //这里如果统一设置BABEL_ENV = node，导致webpack内babel运行时也会去读取env: node的配置
  require('babel-register')({
    'plugins': [
      [
        'babel-plugin-transform-require-ignore',
        {
          extensions: ['.less']
        }
      ],
      'dynamic-import-node'
    ]
  })
}
const app = require('../server/index').default
const http = require('http')
const server = http.createServer(app)
server.listen('8888', '127.0.0.1', () => {
  console.log(`启动成功，监听端口：${server.address().port}`)
})
